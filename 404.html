<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Redirecting...</title>
    <script>
        // Extract the path from the URL (everything after the domain)
        const path = window.location.pathname.slice(1);

        // Get the repository name from the path (first segment)
        const segments = path.split('/');
        const repo = segments[0] || '';

        // Remove the repository name from the path
        const remainingPath = segments.slice(1).join('/');

        // Construct the redirect URL with query parameter containing the path
        const redirectUrl =
            window.location.origin +
            (repo ? '/' + repo : '') +
            '/?path=' +
            encodeURIComponent('/' + remainingPath);

        // Redirect
        window.location.replace(redirectUrl);
    </script>
</head>

<body>
    <h1>Redirecting...</h1>
    <p>If you are not redirected automatically, <a href="/">click here to go to the homepage</a>.</p>
</body>

</html>